Only in e2fsprogs-1.42-blocksize/e2fsck: problem.c.orig
Only in e2fsprogs-1.42-blocksize/e2fsck: super.c.orig
diff -ru e2fsprogs-1.42/tests/m_no_opt/expect.1 e2fsprogs-1.42-blocksize/tests/m_no_opt/expect.1
--- e2fsprogs-1.42/tests/m_no_opt/expect.1	2011-09-16 05:40:34.000000000 +0200
+++ e2fsprogs-1.42-blocksize/tests/m_no_opt/expect.1	2012-02-16 11:44:26.471613692 +0100
@@ -1,20 +1,20 @@
 Filesystem label=
 OS type: Linux
-Block size=1024 (log=0)
-Fragment size=1024 (log=0)
+Block size=2048 (log=1)
+Fragment size=2048 (log=1)
 Stride=0 blocks, Stripe width=0 blocks
-16384 inodes, 65536 blocks
+32768 inodes, 65536 blocks
 3276 blocks (5.00%) reserved for the super user
-First data block=1
-8 block groups
-8192 blocks per group, 8192 fragments per group
-2048 inodes per group
+First data block=0
+4 block groups
+16384 blocks per group, 16384 fragments per group
+8192 inodes per group
 Superblock backups stored on blocks: 
-	8193, 16385, 24577, 32769, 40961, 49153, 57345
+	16384, 32768, 49152
 
-Allocating group tables: 0/81/82/83/84/85/86/87/8   done                            
-Writing inode tables: 0/81/82/83/84/85/86/87/8   done                            
-Writing superblocks and filesystem accounting information: 0/81/82/83/84/85/86/87/8   done
+Allocating group tables: 0/41/42/43/4   done                            
+Writing inode tables: 0/41/42/43/4   done                            
+Writing superblocks and filesystem accounting information: 0/41/42/43/4   done
 
 Filesystem features:(none)
  
@@ -23,7 +23,7 @@
 Pass 3: Checking directory connectivity
 Pass 4: Checking reference counts
 Pass 5: Checking group summary information
-test_filesys: 11/16384 files (0.0% non-contiguous), 2094/65536 blocks
+test_filesys: 11/32768 files (0.0% non-contiguous), 2073/65536 blocks
 Exit status is 0
 
 Filesystem volume name:   <none>
@@ -35,18 +35,18 @@
 Filesystem state:         clean
 Errors behavior:          Continue
 Filesystem OS type:       Linux
-Inode count:              16384
+Inode count:              32768
 Block count:              65536
 Reserved block count:     3276
-Free blocks:              63442
-Free inodes:              16373
-First block:              1
-Block size:               1024
-Fragment size:            1024
-Blocks per group:         8192
-Fragments per group:      8192
-Inodes per group:         2048
-Inode blocks per group:   256
+Free blocks:              63463
+Free inodes:              32757
+First block:              0
+Block size:               2048
+Fragment size:            2048
+Blocks per group:         16384
+Fragments per group:      16384
+Inodes per group:         8192
+Inode blocks per group:   512
 Mount count:              0
 Check interval:           15552000 (6 months)
 Reserved blocks uid:      0
@@ -56,59 +56,31 @@
 Default directory hash:   half_md4
 
 
-Group 0: (Blocks 1-8192)
-  Primary superblock at 1, Group descriptors at 2-2
-  Block bitmap at 3 (+2), Inode bitmap at 4 (+3)
-  Inode table at 5-260 (+4)
-  7919 free blocks, 2037 free inodes, 2 directories
-  Free blocks: 274-8192
-  Free inodes: 12-2048
-Group 1: (Blocks 8193-16384)
-  Backup superblock at 8193, Group descriptors at 8194-8194
-  Block bitmap at 8195 (+2), Inode bitmap at 8196 (+3)
-  Inode table at 8197-8452 (+4)
-  7932 free blocks, 2048 free inodes, 0 directories
-  Free blocks: 8453-16384
-  Free inodes: 2049-4096
-Group 2: (Blocks 16385-24576)
-  Backup superblock at 16385, Group descriptors at 16386-16386
-  Block bitmap at 16387 (+2), Inode bitmap at 16388 (+3)
-  Inode table at 16389-16644 (+4)
-  7932 free blocks, 2048 free inodes, 0 directories
-  Free blocks: 16645-24576
-  Free inodes: 4097-6144
-Group 3: (Blocks 24577-32768)
-  Backup superblock at 24577, Group descriptors at 24578-24578
-  Block bitmap at 24579 (+2), Inode bitmap at 24580 (+3)
-  Inode table at 24581-24836 (+4)
-  7932 free blocks, 2048 free inodes, 0 directories
-  Free blocks: 24837-32768
-  Free inodes: 6145-8192
-Group 4: (Blocks 32769-40960)
-  Backup superblock at 32769, Group descriptors at 32770-32770
-  Block bitmap at 32771 (+2), Inode bitmap at 32772 (+3)
-  Inode table at 32773-33028 (+4)
-  7932 free blocks, 2048 free inodes, 0 directories
-  Free blocks: 33029-40960
-  Free inodes: 8193-10240
-Group 5: (Blocks 40961-49152)
-  Backup superblock at 40961, Group descriptors at 40962-40962
-  Block bitmap at 40963 (+2), Inode bitmap at 40964 (+3)
-  Inode table at 40965-41220 (+4)
-  7932 free blocks, 2048 free inodes, 0 directories
-  Free blocks: 41221-49152
-  Free inodes: 10241-12288
-Group 6: (Blocks 49153-57344)
-  Backup superblock at 49153, Group descriptors at 49154-49154
-  Block bitmap at 49155 (+2), Inode bitmap at 49156 (+3)
-  Inode table at 49157-49412 (+4)
-  7932 free blocks, 2048 free inodes, 0 directories
-  Free blocks: 49413-57344
-  Free inodes: 12289-14336
-Group 7: (Blocks 57345-65535)
-  Backup superblock at 57345, Group descriptors at 57346-57346
-  Block bitmap at 57347 (+2), Inode bitmap at 57348 (+3)
-  Inode table at 57349-57604 (+4)
-  7931 free blocks, 2048 free inodes, 0 directories
-  Free blocks: 57605-65535
-  Free inodes: 14337-16384
+Group 0: (Blocks 0-16383)
+  Primary superblock at 0, Group descriptors at 1-1
+  Block bitmap at 2 (+2), Inode bitmap at 3 (+3)
+  Inode table at 4-515 (+4)
+  15859 free blocks, 8181 free inodes, 2 directories
+  Free blocks: 525-16383
+  Free inodes: 12-8192
+Group 1: (Blocks 16384-32767)
+  Backup superblock at 16384, Group descriptors at 16385-16385
+  Block bitmap at 16386 (+2), Inode bitmap at 16387 (+3)
+  Inode table at 16388-16899 (+4)
+  15868 free blocks, 8192 free inodes, 0 directories
+  Free blocks: 16900-32767
+  Free inodes: 8193-16384
+Group 2: (Blocks 32768-49151)
+  Backup superblock at 32768, Group descriptors at 32769-32769
+  Block bitmap at 32770 (+2), Inode bitmap at 32771 (+3)
+  Inode table at 32772-33283 (+4)
+  15868 free blocks, 8192 free inodes, 0 directories
+  Free blocks: 33284-49151
+  Free inodes: 16385-24576
+Group 3: (Blocks 49152-65535)
+  Backup superblock at 49152, Group descriptors at 49153-49153
+  Block bitmap at 49154 (+2), Inode bitmap at 49155 (+3)
+  Inode table at 49156-49667 (+4)
+  15868 free blocks, 8192 free inodes, 0 directories
+  Free blocks: 49668-65535
+  Free inodes: 24577-32768
diff -ru e2fsprogs-1.42/tests/m_no_opt/script e2fsprogs-1.42-blocksize/tests/m_no_opt/script
--- e2fsprogs-1.42/tests/m_no_opt/script	2009-08-13 03:39:58.000000000 +0200
+++ e2fsprogs-1.42-blocksize/tests/m_no_opt/script	2012-02-16 11:40:45.142163303 +0100
@@ -1,4 +1,4 @@
 DESCRIPTION="no filesystem extensions"
 FS_SIZE=65536
-MKE2FS_OPTS="-O ^sparse_super,^filetype,^resize_inode,^dir_index,^ext_attr"
+MKE2FS_OPTS="-b 2048 -O ^sparse_super,^filetype,^resize_inode,^dir_index,^ext_attr"
 . $cmd_dir/run_mke2fs
